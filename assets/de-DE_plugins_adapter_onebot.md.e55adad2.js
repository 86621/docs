import{_ as r,p as l,s as i,D as n,I as o,S as s,q as p,v as e,L as t}from"./chunks/framework.26d7e063.js";const S=JSON.parse('{"title":"@koishijs/plugin-adapter-onebot","description":"","frontmatter":{},"headers":[],"relativePath":"de-DE/plugins/adapter/onebot.md","filePath":"de-DE/plugins/adapter/onebot.md"}'),c={name:"de-DE/plugins/adapter/onebot.md"},h=s(`<h1 id="koishijs-plugin-adapter-onebot" tabindex="-1">@koishijs/plugin-adapter-onebot <a class="header-anchor" href="#koishijs-plugin-adapter-onebot" aria-label="Permalink to &quot;@koishijs/plugin-adapter-onebot&quot;">​</a></h1><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>尽管 Koishi 使用了 <a href="https://choosealicense.com/licenses/mit/" target="_blank" rel="noreferrer">MIT</a> 协议，但 OneBot 相关框架普遍使用了基于 <a href="https://choosealicense.com/licenses/agpl-3.0/" target="_blank" rel="noreferrer">AGPL 3.0</a> 的协议。因此如果你使用 @koishijs/plugin-adapter-onebot 运行你的机器人，你将可能受到 AGPL 3.0 协议的限制，必须将你的代码开源并保持同协议。Koishi 及其作者对使用上述框架或违反上述限制的行为所可能造成的一切后果概不负责。</p></div><p><a href="https://github.com/howmanybots/onebot" target="_blank" rel="noreferrer">OneBot</a> 是一个聊天机器人应用接口标准，目前可用于 QQ 等平台。你可以使用下列实现该协议的框架：</p><ul><li><a href="https://github.com/Mrs4s/go-cqhttp" target="_blank" rel="noreferrer">Mrs4s/go-cqhttp</a>（推荐）</li><li><a href="https://github.com/yyuueexxiinngg/cqhttp-mirai" target="_blank" rel="noreferrer">yyuueexxiinngg/cqhttp-mirai</a></li><li><a href="https://github.com/richardchien/coolq-http-api" target="_blank" rel="noreferrer">richardchien/coolq-http-api</a> (配合 <a href="https://github.com/iTXTech/mirai-native" target="_blank" rel="noreferrer">iTXTech/mirai-native</a> 使用)</li></ul><p>我们推荐使用 go-cqhttp。<strong>在本文的后续部分我们只会介绍 go-cqhttp 的使用方法</strong>。有对其他框架感兴趣的同学也可以自行探索。</p><p>与此同时，OneBot 协议规定了四种不同的通信方式：</p><ul><li>正向 HTTP：OneBot 作为 HTTP 服务端，提供 API 调用服务</li><li>反向 HTTP：OneBot 作为 HTTP 客户端，向用户配置的 URL 推送事件，并处理用户返回的响应</li><li>正向 WebSocket：OneBot 作为 WebSocket 服务端，接受用户连接，提供 API 调用和事件推送服务</li><li>反向 WebSocket：OneBot 作为 WebSocket 客户端，主动连接用户配置的 URL，提供 API 调用和事件推送服务</li></ul><p>我们推荐使用正向 WebSocket，这种通信方式操作简便，且拥有相对较高的性能。在本文的后续部分我们将介绍每一种通信方式的配置方法。</p><h2 id="安装与运行" tabindex="-1">安装与运行 <a class="header-anchor" href="#安装与运行" aria-label="Permalink to &quot;安装与运行&quot;">​</a></h2><ol><li>首先从 <a href="https://github.com/Mrs4s/go-cqhttp/releases" target="_blank" rel="noreferrer">这个页面</a> 下载并解压最新版本的 go-cqhttp <ul><li>如果你不知道下载哪一个，<a href="#我不知道应该下载-release-中的哪一个文件。">请看这里</a></li></ul></li><li>打开命令行并 cd 到你的解压目录</li><li>输入 <code>./go-cqhttp</code> 并运行，此时将提示：</li></ol><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:var(--shiki-token-function);">未找到配置文件，正在为您生成配置文件中！</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">请选择你需要的通信方式:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">  </span><span style="color:var(--shiki-token-function);">1:</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">HTTP</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">通信</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">  </span><span style="color:var(--shiki-token-function);">2:</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">正向</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">WebSocket</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">通信</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">  </span><span style="color:var(--shiki-token-function);">3:</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">反向</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">WebSocket</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">通信</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">你的选择是:</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-number);">2</span><span style="color:var(--shiki-token-text);">           </span><span style="color:#7F848E;font-style:italic;"># 根据你的需求可作更改，输入后回车进入下一步</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">默认配置文件已生成，请修改</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">config.yml</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">后重新启动。</span></span></code></pre></div><ol start="4"><li>根据 <a href="#go-cqhttp-配置参考">配置参考</a> 中的说明修改 config.yml 文件。之后再次输入 <code>./go-cqhttp</code> 并运行：</li></ol><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:var(--shiki-token-text);">[INFO]: 登录成功 欢迎使用: balabala</span></span></code></pre></div><ol start="5"><li>如出现需要认证的信息, 请自行认证设备。</li></ol><h3 id="快速启动" tabindex="-1">快速启动 <a class="header-anchor" href="#快速启动" aria-label="Permalink to &quot;快速启动&quot;">​</a></h3><p>默认情况下启用 go-cqhttp 将会有五秒钟的延时，可以使用命令行参数 <code>-faststart</code> 进行跳过：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:var(--shiki-token-function);">./go-cqhttp</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-number);">-faststart</span></span></code></pre></div><h3 id="获取更新" tabindex="-1">获取更新 <a class="header-anchor" href="#获取更新" aria-label="Permalink to &quot;获取更新&quot;">​</a></h3><p>除了直接用前面的方法下载新版本并替换原文件外，go-cqhttp 还提供了另一种获取更新的方式。</p><p>在命令行中进入 go-cqhttp 所在目录并输入：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:var(--shiki-token-function);">./go-cqhttp</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">update</span></span></code></pre></div><p>如果在国内连接 GitHub 下载速度可能很慢, 可以使用镜像源下载：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:var(--shiki-token-function);">./go-cqhttp</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">update</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">https://github.rc1844.workers.dev</span></span></code></pre></div><p>几个可用的镜像源：</p><ul><li><code>https://hub.fastgit.xyz</code></li><li><code>https://github.bajins.com</code></li><li><code>https://github.rc1844.workers.dev</code></li></ul><h3 id="安装-ffmpeg" tabindex="-1">安装 FFmpeg <a class="header-anchor" href="#安装-ffmpeg" aria-label="Permalink to &quot;安装 FFmpeg&quot;">​</a></h3><p>为了支持任意格式的语音发送, 你需要安装 FFmpeg。</p><h4 id="windows" tabindex="-1">Windows <a class="header-anchor" href="#windows" aria-label="Permalink to &quot;Windows&quot;">​</a></h4><p><a href="https://www.gyan.dev/ffmpeg/builds/ffmpeg-release-full.7z" target="_blank" rel="noreferrer">点击这里</a> 下载并解压, 并为 <code>bin</code> 这个文件夹添加环境变量。</p><p>如果遇到下载速度缓慢的问题可以用 <a href="https://downloads.go-cqhttp.org/ffmpeg-release-full.7z" target="_blank" rel="noreferrer">这个源</a>。</p><h4 id="ubuntu-debian" tabindex="-1">Ubuntu / Debian <a class="header-anchor" href="#ubuntu-debian" aria-label="Permalink to &quot;Ubuntu / Debian&quot;">​</a></h4><p>在终端执行：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:var(--shiki-token-function);">apt</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">install</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-number);">-y</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">ffmpeg</span></span></code></pre></div><h4 id="fedora-rhel-centos" tabindex="-1">Fedora / RHEL / CentOS <a class="header-anchor" href="#fedora-rhel-centos" aria-label="Permalink to &quot;Fedora / RHEL / CentOS&quot;">​</a></h4><p>在终端执行：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:#7F848E;font-style:italic;"># Centos7 及之前</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">yum</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">install</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">ffmpeg</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">ffmpeg-devel</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># CentOS8 及之后</span></span>
<span class="line"><span style="color:var(--shiki-token-function);">dnf</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">install</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">ffmpeg</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">ffmpeg-devel</span></span></code></pre></div><h2 id="机器人选项" tabindex="-1">机器人选项 <a class="header-anchor" href="#机器人选项" aria-label="Permalink to &quot;机器人选项&quot;">​</a></h2><h3 id="options-protocol" tabindex="-1">options.protocol <a class="header-anchor" href="#options-protocol" aria-label="Permalink to &quot;options.protocol&quot;">​</a></h3><ul><li>可选值: http, ws, ws-reverse</li></ul><p>要使用的协议类型。</p><h3 id="options-token" tabindex="-1">options.token <a class="header-anchor" href="#options-token" aria-label="Permalink to &quot;options.token&quot;">​</a></h3><ul><li>类型：<code>string</code></li></ul><p>发送信息时用于验证的字段。</p><h3 id="options-endpoint" tabindex="-1">options.endpoint <a class="header-anchor" href="#options-endpoint" aria-label="Permalink to &quot;options.endpoint&quot;">​</a></h3><ul><li>类型：<code>string</code></li></ul><p>如果使用了 HTTP，则该配置将作为发送信息的服务端；如果使用了 WebSocket，则该配置将作为监听事件和发送信息的服务端。</p><h3 id="options-proxyagent" tabindex="-1">options.proxyAgent <a class="header-anchor" href="#options-proxyagent" aria-label="Permalink to &quot;options.proxyAgent&quot;">​</a></h3><ul><li>类型: <code>string</code></li><li>默认值: <a href="./../../api/core/app.html#options-request-proxyagent"><code>app.config.request.proxyAgent</code></a></li></ul><p>请求时默认使用的网络代理。</p><h2 id="适配器选项" tabindex="-1">适配器选项 <a class="header-anchor" href="#适配器选项" aria-label="Permalink to &quot;适配器选项&quot;">​</a></h2><h3 id="options-path" tabindex="-1">options.path <a class="header-anchor" href="#options-path" aria-label="Permalink to &quot;options.path&quot;">​</a></h3><ul><li>类型：<code>string</code></li><li>默认值：<code>&#39;/onebot&#39;</code></li></ul><p>服务器监听的路径。仅用于 HTTP 通信方式。</p><h3 id="options-secret" tabindex="-1">options.secret <a class="header-anchor" href="#options-secret" aria-label="Permalink to &quot;options.secret&quot;">​</a></h3><ul><li>类型：<code>string</code></li></ul><p>接收信息时用于验证的字段，应与 OneBot 的 <code>secret</code> 配置保持一致。</p><h2 id="go-cqhttp-配置参考" tabindex="-1">go-cqhttp 配置参考 <a class="header-anchor" href="#go-cqhttp-配置参考" aria-label="Permalink to &quot;go-cqhttp 配置参考&quot;">​</a></h2><p>首先下面的配置是与通信方式无关的：</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">config.yml</span><pre><code><span class="line"><span style="color:var(--shiki-token-parameter);">account</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">  </span><span style="color:var(--shiki-token-parameter);">uin</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-number);">123456</span><span style="color:var(--shiki-token-text);">     </span><span style="color:#7F848E;font-style:italic;"># 必填，用作机器人的账号</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">  </span><span style="color:var(--shiki-token-parameter);">password</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-string);">&#39;&#39;</span><span style="color:var(--shiki-token-text);">    </span><span style="color:#7F848E;font-style:italic;"># 推荐，密码为空时将使用扫码登录</span></span></code></pre></div><p>下面介绍不同的通信方式所需的配置，以及 koishi.yml 的对应配置。</p><h3 id="http" tabindex="-1">HTTP <a class="header-anchor" href="#http" aria-label="Permalink to &quot;HTTP&quot;">​</a></h3><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">config.yml</span><pre><code><span class="line"><span style="color:var(--shiki-token-parameter);">servers</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">  - </span><span style="color:var(--shiki-token-parameter);">http</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">      </span><span style="color:var(--shiki-token-parameter);">host</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-number);">127.0.0.1</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">      </span><span style="color:var(--shiki-token-parameter);">port</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-number);">5700</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">      </span><span style="color:var(--shiki-token-parameter);">post</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">        - </span><span style="color:var(--shiki-token-parameter);">url</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-string);">http://localhost:8080/onebot</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">          </span><span style="color:var(--shiki-token-parameter);">secret</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-string);">my-secret</span></span></code></pre></div>`,62),k=e("div",{class:"language-yaml"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"yaml"),e("pre",null,[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-parameter)"}},"port"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-number)"}},"8080")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-parameter)"}},"plugins"),e("span",{style:{color:"var(--shiki-token-text)"}},":")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"adapter-onebot"),e("span",{style:{color:"var(--shiki-token-text)"}},":")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"protocol"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"http")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"selfId"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"'123456789'")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"endpoint"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"http://127.0.0.1:5700")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"secret"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"my-secret")])])])],-1),E=e("div",{class:"language-ts"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"ts"),e("pre",null,[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-keyword)"}},"export"),e("span",{style:{color:"var(--shiki-token-text)"}}," "),e("span",{style:{color:"var(--shiki-token-keyword)"}},"default"),e("span",{style:{color:"var(--shiki-token-text)"}}," {")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"port"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-number)"}},"8080"),e("span",{style:{color:"var(--shiki-token-text)"}},",")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"plugins"),e("span",{style:{color:"var(--shiki-token-text)"}},": {")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    "),e("span",{style:{color:"var(--shiki-token-string)"}},"'adapter-onebot'"),e("span",{style:{color:"var(--shiki-token-text)"}},": {")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"      "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"protocol"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"'http'"),e("span",{style:{color:"var(--shiki-token-text)"}},",")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"      "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"selfId"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"'123456789'"),e("span",{style:{color:"var(--shiki-token-text)"}},",")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"      "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"endpoint"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"'http://127.0.0.1:5700'"),e("span",{style:{color:"var(--shiki-token-text)"}},",")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"      "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"secret"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"'my-secret'"),e("span",{style:{color:"var(--shiki-token-text)"}},",")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    },")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  },")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"}")])])])],-1),d=s(`<h3 id="正向-websocket" tabindex="-1">正向 WebSocket <a class="header-anchor" href="#正向-websocket" aria-label="Permalink to &quot;正向 WebSocket&quot;">​</a></h3><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">config.yml</span><pre><code><span class="line"><span style="color:var(--shiki-token-parameter);">servers</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">  - </span><span style="color:var(--shiki-token-parameter);">ws</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">      </span><span style="color:var(--shiki-token-parameter);">host</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-number);">127.0.0.1</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">      </span><span style="color:var(--shiki-token-parameter);">port</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-number);">6700</span></span></code></pre></div>`,2),b=e("div",{class:"language-yaml"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"yaml"),e("pre",null,[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-parameter)"}},"plugins"),e("span",{style:{color:"var(--shiki-token-text)"}},":")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"adapter-onebot"),e("span",{style:{color:"var(--shiki-token-text)"}},":")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"protocol"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"ws")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"selfId"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"'123456789'")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"endpoint"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"ws://127.0.0.1:6700")])])])],-1),g=e("div",{class:"language-ts"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"ts"),e("pre",null,[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-keyword)"}},"export"),e("span",{style:{color:"var(--shiki-token-text)"}}," "),e("span",{style:{color:"var(--shiki-token-keyword)"}},"default"),e("span",{style:{color:"var(--shiki-token-text)"}}," {")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"plugins"),e("span",{style:{color:"var(--shiki-token-text)"}},": {")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    "),e("span",{style:{color:"var(--shiki-token-string)"}},"'adapter-onebot'"),e("span",{style:{color:"var(--shiki-token-text)"}},": {")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"      "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"protocol"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"'ws'"),e("span",{style:{color:"var(--shiki-token-text)"}},",")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"      "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"selfId"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"'123456789'"),e("span",{style:{color:"var(--shiki-token-text)"}},",")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"      "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"endpoint"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"'ws://127.0.0.1:6700'"),e("span",{style:{color:"var(--shiki-token-text)"}},",")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    },")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  },")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"}")])])])],-1),u=s(`<h3 id="反向-websocket" tabindex="-1">反向 WebSocket <a class="header-anchor" href="#反向-websocket" aria-label="Permalink to &quot;反向 WebSocket&quot;">​</a></h3><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">config.yml</span><pre><code><span class="line"><span style="color:var(--shiki-token-parameter);">servers</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">  - </span><span style="color:var(--shiki-token-parameter);">ws-reverse</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">      </span><span style="color:var(--shiki-token-parameter);">universal</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-string);">ws://127.0.0.1:8080/onebot</span></span></code></pre></div>`,2),y=e("div",{class:"language-yaml"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"yaml"),e("pre",null,[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-parameter)"}},"port"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-number)"}},"8080")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-parameter)"}},"plugins"),e("span",{style:{color:"var(--shiki-token-text)"}},":")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"adapter-onebot"),e("span",{style:{color:"var(--shiki-token-text)"}},":")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"protocol"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"ws-reverse")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"selfId"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"'123456789'")])])])],-1),v=e("div",{class:"language-ts"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"ts"),e("pre",null,[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-keyword)"}},"export"),e("span",{style:{color:"var(--shiki-token-text)"}}," "),e("span",{style:{color:"var(--shiki-token-keyword)"}},"default"),e("span",{style:{color:"var(--shiki-token-text)"}}," {")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"port"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-number)"}},"8080"),e("span",{style:{color:"var(--shiki-token-text)"}},",")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"plugins"),e("span",{style:{color:"var(--shiki-token-text)"}},": {")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    "),e("span",{style:{color:"var(--shiki-token-string)"}},"'adapter-onebot'"),e("span",{style:{color:"var(--shiki-token-text)"}},": {")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"      "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"protocol"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"'ws-reverse'"),e("span",{style:{color:"var(--shiki-token-text)"}},",")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"      "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"selfId"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"'123456789'"),e("span",{style:{color:"var(--shiki-token-text)"}},",")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    },")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  },")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"}")])])])],-1),m=s(`<h3 id="配置-path-和-selfurl" tabindex="-1">配置 <code>path</code> 和 <code>selfUrl</code> <a class="header-anchor" href="#配置-path-和-selfurl" aria-label="Permalink to &quot;配置 \`path\` 和 \`selfUrl\`&quot;">​</a></h3><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">config.yml</span><pre><code><span class="line"><span style="color:var(--shiki-token-parameter);">servers</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">  </span><span style="color:#7F848E;font-style:italic;"># 这里同时列出了 http 和 ws-reverse 中需要做的修改</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">  </span><span style="color:#7F848E;font-style:italic;"># 实际情况下你可能只需要用到其中一份配置</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">  - </span><span style="color:var(--shiki-token-parameter);">http</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">      </span><span style="color:var(--shiki-token-parameter);">post</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">        - </span><span style="color:var(--shiki-token-parameter);">url</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-string);">https://my-host:9090/onebot</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">  - </span><span style="color:var(--shiki-token-parameter);">ws-reverse</span><span style="color:var(--shiki-token-text);">:</span></span>
<span class="line"><span style="color:var(--shiki-token-text);">      </span><span style="color:var(--shiki-token-parameter);">universal</span><span style="color:var(--shiki-token-text);">: </span><span style="color:var(--shiki-token-string);">wss://my-host:9090/onebot</span></span></code></pre></div>`,2),B=e("div",{class:"language-yaml"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"yaml"),e("pre",null,[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"#7F848E","font-style":"italic"}},"# 请注意这里的 port 可能跟 selfUrl 中的不一致")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"#7F848E","font-style":"italic"}},"# 你可以通过 nginx，candy 等工具实现端口的转发和 SSL 等需求")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-parameter)"}},"port"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-number)"}},"8080")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-parameter)"}},"selfUrl"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"https://my-host:9090")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-parameter)"}},"plugins"),e("span",{style:{color:"var(--shiki-token-text)"}},":")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"adapter-onebot"),e("span",{style:{color:"var(--shiki-token-text)"}},":")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"path"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"/foo")])])])],-1),f=e("div",{class:"language-ts"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"ts"),e("pre",null,[e("code",null,[e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-keyword)"}},"export"),e("span",{style:{color:"var(--shiki-token-text)"}}," "),e("span",{style:{color:"var(--shiki-token-keyword)"}},"default"),e("span",{style:{color:"var(--shiki-token-text)"}}," {")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  "),e("span",{style:{color:"#7F848E","font-style":"italic"}},"// 请注意这里的 port 可能跟 selfUrl 中的不一致")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  "),e("span",{style:{color:"#7F848E","font-style":"italic"}},"// 你可以通过 nginx，candy 等工具实现端口的转发和 SSL 等需求")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"port"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-number)"}},"8080"),e("span",{style:{color:"var(--shiki-token-text)"}},",")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"selfUrl"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"'https://my-host:9090'"),e("span",{style:{color:"var(--shiki-token-text)"}},",")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"plugins"),e("span",{style:{color:"var(--shiki-token-text)"}},": {")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    "),e("span",{style:{color:"var(--shiki-token-string)"}},"'adapter-onebot'"),e("span",{style:{color:"var(--shiki-token-text)"}},": {")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"      "),e("span",{style:{color:"var(--shiki-token-parameter)"}},"path"),e("span",{style:{color:"var(--shiki-token-text)"}},": "),e("span",{style:{color:"var(--shiki-token-string)"}},"'/foo'"),e("span",{style:{color:"var(--shiki-token-text)"}},",")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"    },")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"  },")]),t(`
`),e("span",{class:"line"},[e("span",{style:{color:"var(--shiki-token-text)"}},"}")])])])],-1),A=s('<h2 id="内部-api" tabindex="-1">内部 API <a class="header-anchor" href="#内部-api" aria-label="Permalink to &quot;内部 API&quot;">​</a></h2><p>你可以通过 <code>bot.internal</code> 或 <code>session.onebot</code> 访问到内部 API，参见 <a href="./../../guide/adapter/">调用机器人</a>。</p><p>下面展示了目前已经实现的 API 列表。如要了解细节请自行点击对应方法的链接进行查阅。</p><h3 id="onebot-v11-标准-api" tabindex="-1">OneBot v11 标准 API <a class="header-anchor" href="#onebot-v11-标准-api" aria-label="Permalink to &quot;OneBot v11 标准 API&quot;">​</a></h3><ul><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#send_private_msg-%E5%8F%91%E9%80%81%E7%A7%81%E8%81%8A%E6%B6%88%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.sendPrivateMsg()</code></a> 发送私聊消息</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#send_group_msg-%E5%8F%91%E9%80%81%E7%BE%A4%E6%B6%88%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.sendGroupMsg()</code></a> 发送群消息</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#delete_msg-%E6%92%A4%E5%9B%9E%E6%B6%88%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.deleteMsg()</code></a> 撤回消息</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_msg-%E8%8E%B7%E5%8F%96%E6%B6%88%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.getMsg()</code></a> 获取消息</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_forward_msg-%E8%8E%B7%E5%8F%96%E5%90%88%E5%B9%B6%E8%BD%AC%E5%8F%91%E6%B6%88%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.getForwardMsg()</code></a> 获取合并转发消息</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#send_like-%E5%8F%91%E9%80%81%E5%A5%BD%E5%8F%8B%E8%B5%9E" target="_blank" rel="noreferrer"><code>onebot.sendLike()</code></a> 发送好友赞</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#set_group_kick-%E7%BE%A4%E7%BB%84%E8%B8%A2%E4%BA%BA" target="_blank" rel="noreferrer"><code>onebot.setGroupKick()</code></a> 群组踢人</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#set_group_ban-%E7%BE%A4%E7%BB%84%E5%8D%95%E4%BA%BA%E7%A6%81%E8%A8%80" target="_blank" rel="noreferrer"><code>onebot.setGroupBan()</code></a> 群组单人禁言</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#set_group_anonymous_ban-%E7%BE%A4%E7%BB%84%E5%8C%BF%E5%90%8D%E7%94%A8%E6%88%B7%E7%A6%81%E8%A8%80" target="_blank" rel="noreferrer"><code>onebot.setGroupAnonymousBan()</code></a> 群组匿名用户禁言 <sup>[1]</sup></li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#set_group_whole_ban-%E7%BE%A4%E7%BB%84%E5%85%A8%E5%91%98%E7%A6%81%E8%A8%80" target="_blank" rel="noreferrer"><code>onebot.setGroupWholeBan()</code></a> 群组全员禁言</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#set_group_admin-%E7%BE%A4%E7%BB%84%E8%AE%BE%E7%BD%AE%E7%AE%A1%E7%90%86%E5%91%98" target="_blank" rel="noreferrer"><code>onebot.setGroupAdmin()</code></a> 群组设置管理员</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#set_group_anonymous-%E7%BE%A4%E7%BB%84%E5%8C%BF%E5%90%8D" target="_blank" rel="noreferrer"><code>onebot.setGroupAnonymous()</code></a> 群组匿名 <sup>[2]</sup></li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#set_group_card-%E8%AE%BE%E7%BD%AE%E7%BE%A4%E5%90%8D%E7%89%87%E7%BE%A4%E5%A4%87%E6%B3%A8" target="_blank" rel="noreferrer"><code>onebot.setGroupCard()</code></a> 设置群名片（群备注）</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#set_group_name-%E8%AE%BE%E7%BD%AE%E7%BE%A4%E5%90%8D" target="_blank" rel="noreferrer"><code>onebot.setGroupName()</code></a> 设置群名</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#set_group_leave-%E9%80%80%E5%87%BA%E7%BE%A4%E7%BB%84" target="_blank" rel="noreferrer"><code>onebot.setGroupLeave()</code></a> 退出群组</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#set_group_special_title-%E8%AE%BE%E7%BD%AE%E7%BE%A4%E7%BB%84%E4%B8%93%E5%B1%9E%E5%A4%B4%E8%A1%94" target="_blank" rel="noreferrer"><code>onebot.setGroupSpecialTitle()</code></a> 设置群组专属头衔</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#set_friend_add_request-%E5%A4%84%E7%90%86%E5%8A%A0%E5%A5%BD%E5%8F%8B%E8%AF%B7%E6%B1%82" target="_blank" rel="noreferrer"><code>onebot.setFriendAddRequest()</code></a> 处理加好友请求</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#set_group_add_request-%E5%A4%84%E7%90%86%E5%8A%A0%E7%BE%A4%E8%AF%B7%E6%B1%82%E9%82%80%E8%AF%B7" target="_blank" rel="noreferrer"><code>onebot.setGroupAddRequest()</code></a> 处理加群请求／邀请</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_login_info-%E8%8E%B7%E5%8F%96%E7%99%BB%E5%BD%95%E5%8F%B7%E4%BF%A1%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.getLoginInfo()</code></a> 获取登录号信息</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_stranger_info-%E8%8E%B7%E5%8F%96%E9%99%8C%E7%94%9F%E4%BA%BA%E4%BF%A1%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.getStrangerInfo()</code></a> 获取陌生人信息</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_friend_list-%E8%8E%B7%E5%8F%96%E5%A5%BD%E5%8F%8B%E5%88%97%E8%A1%A8" target="_blank" rel="noreferrer"><code>onebot.getFriendList()</code></a> 获取好友列表</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_group_info-%E8%8E%B7%E5%8F%96%E7%BE%A4%E4%BF%A1%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.getGroupInfo()</code></a> 获取群信息</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_group_list-%E8%8E%B7%E5%8F%96%E7%BE%A4%E5%88%97%E8%A1%A8" target="_blank" rel="noreferrer"><code>onebot.getGroupList()</code></a> 获取群列表</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_group_member_info-%E8%8E%B7%E5%8F%96%E7%BE%A4%E6%88%90%E5%91%98%E4%BF%A1%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.getGroupMemberInfo()</code></a> 获取群成员信息</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_group_member_list-%E8%8E%B7%E5%8F%96%E7%BE%A4%E6%88%90%E5%91%98%E5%88%97%E8%A1%A8" target="_blank" rel="noreferrer"><code>onebot.getGroupMemberList()</code></a> 获取群成员列表</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_group_honor_info-%E8%8E%B7%E5%8F%96%E7%BE%A4%E8%8D%A3%E8%AA%89%E4%BF%A1%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.getGroupHonorInfo()</code></a> 获取群荣誉信息</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_cookies-%E8%8E%B7%E5%8F%96-cookies" target="_blank" rel="noreferrer"><code>onebot.getCookies()</code></a> 获取 Cookies <sup>[2]</sup></li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_csrf_token-%E8%8E%B7%E5%8F%96-csrf-token" target="_blank" rel="noreferrer"><code>onebot.getCsrfToken()</code></a> 获取 CSRF Token <sup>[2]</sup></li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_credentials-%E8%8E%B7%E5%8F%96-qq-%E7%9B%B8%E5%85%B3%E6%8E%A5%E5%8F%A3%E5%87%AD%E8%AF%81" target="_blank" rel="noreferrer"><code>onebot.getCredentials()</code></a> 获取 QQ 相关接口凭证 <sup>[2]</sup></li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_record-%E8%8E%B7%E5%8F%96%E8%AF%AD%E9%9F%B3" target="_blank" rel="noreferrer"><code>onebot.getRecord()</code></a> 获取语音 <sup>[2]</sup></li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_image-%E8%8E%B7%E5%8F%96%E5%9B%BE%E7%89%87" target="_blank" rel="noreferrer"><code>onebot.getImage()</code></a> 获取图片</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#can_send_image-%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E5%8F%91%E9%80%81%E5%9B%BE%E7%89%87" target="_blank" rel="noreferrer"><code>onebot.canSendImage()</code></a> 检查是否可以发送图片</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#can_send_record-%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E5%8F%91%E9%80%81%E8%AF%AD%E9%9F%B3" target="_blank" rel="noreferrer"><code>onebot.canSendRecord()</code></a> 检查是否可以发送语音</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_status-%E8%8E%B7%E5%8F%96%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81" target="_blank" rel="noreferrer"><code>onebot.getStatus()</code></a> 获取运行状态</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#get_version_info-%E8%8E%B7%E5%8F%96%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.getVersionInfo()</code></a> 获取版本信息</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#set_restart-%E9%87%8D%E5%90%AF-onebot-%E5%AE%9E%E7%8E%B0" target="_blank" rel="noreferrer"><code>onebot.setRestart()</code></a> 重启 OneBot 实现</li><li><a href="https://github.com/botuniverse/onebot-11/blob/master/api/public.md#clean_cache-%E6%B8%85%E7%90%86%E7%BC%93%E5%AD%98" target="_blank" rel="noreferrer"><code>onebot.cleanCache()</code></a> 清理缓存 <sup>[2]</sup></li></ul><p>注释：</p><ol><li>这个方法只有三个参数，其中第二个参数对应 <code>anonymous</code> 或 <code>flag</code></li><li>这些方法并未被 go-cqhttp 支持，访问时可能出错</li></ol><h3 id="go-cqhttp-扩展-api" tabindex="-1">go-cqhttp 扩展 API <a class="header-anchor" href="#go-cqhttp-扩展-api" aria-label="Permalink to &quot;go-cqhttp 扩展 API&quot;">​</a></h3><ul><li><a href="https://docs.go-cqhttp.org/api/#%E5%8F%91%E9%80%81%E5%90%88%E5%B9%B6%E8%BD%AC%E5%8F%91-%E7%BE%A4" target="_blank" rel="noreferrer"><code>onebot.sendGroupForwardMsg()</code></a> 发送合并转发 (群)</li><li><a href="https://docs.go-cqhttp.org/api/#%E6%A0%87%E8%AE%B0%E6%B6%88%E6%81%AF%E5%B7%B2%E8%AF%BB" target="_blank" rel="noreferrer"><code>onebot.markMsgAsRead()</code></a> 标记消息已读</li><li><a href="https://docs.go-cqhttp.org/api/#%E7%BE%A4%E6%89%93%E5%8D%A1" target="_blank" rel="noreferrer"><code>onebot.sendGroupSign()</code></a> 群打卡</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E4%BC%81%E7%82%B9%E8%B4%A6%E5%8F%B7%E4%BF%A1%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.qidianGetAccountInfo()</code></a> 获取企点账号信息</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%AE%BE%E7%BD%AE%E7%99%BB%E5%BD%95%E5%8F%B7%E8%B5%84%E6%96%99" target="_blank" rel="noreferrer"><code>onebot.setQqProfile()</code></a> 设置登录号资料</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E5%8D%95%E5%90%91%E5%A5%BD%E5%8F%8B%E5%88%97%E8%A1%A8" target="_blank" rel="noreferrer"><code>onebot.getUnidirectionalFriendList()</code></a> 获取单向好友列表</li><li><a href="https://docs.go-cqhttp.org/api/#%E5%88%A0%E9%99%A4%E5%A5%BD%E5%8F%8B" target="_blank" rel="noreferrer"><code>onebot.deleteFriend()</code></a> 删除好友</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%AE%BE%E7%BD%AE%E7%BE%A4%E5%A4%B4%E5%83%8F" target="_blank" rel="noreferrer"><code>onebot.setGroupPortrait()</code></a> 设置群头像</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E4%B8%AD%E6%96%87%E5%88%86%E8%AF%8D-%E9%9A%90%E8%97%8F-api" target="_blank" rel="noreferrer"><code>onebot.getWordSlices()</code></a> 获取中文分词</li><li><a href="https://docs.go-cqhttp.org/api/#%E5%9B%BE%E7%89%87-ocr" target="_blank" rel="noreferrer"><code>onebot.ocrImage()</code></a> 图片 OCR</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4%E7%B3%BB%E7%BB%9F%E6%B6%88%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.getGroupSystemMsg()</code></a> 获取群系统消息</li><li><a href="https://docs.go-cqhttp.org/api/#%E4%B8%8A%E4%BC%A0%E7%A7%81%E8%81%8A%E6%96%87%E4%BB%B6" target="_blank" rel="noreferrer"><code>onebot.uploadPrivateFile()</code></a> 上传私聊文件</li><li><a href="https://docs.go-cqhttp.org/api/#%E4%B8%8A%E4%BC%A0%E7%BE%A4%E6%96%87%E4%BB%B6" target="_blank" rel="noreferrer"><code>onebot.uploadGroupFile()</code></a> 上传群文件</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.getGroupFileSystemInfo()</code></a> 获取群文件系统信息</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4%E6%A0%B9%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6%E5%88%97%E8%A1%A8" target="_blank" rel="noreferrer"><code>onebot.getGroupRootFiles()</code></a> 获取群根目录文件列表</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4%E5%AD%90%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6%E5%88%97%E8%A1%A8" target="_blank" rel="noreferrer"><code>onebot.getGroupFilesByFolder()</code></a> 获取群子目录文件列表</li><li><a href="https://docs.go-cqhttp.org/api/#%E5%88%9B%E5%BB%BA%E7%BE%A4%E6%96%87%E4%BB%B6%E6%96%87%E4%BB%B6%E5%A4%B9" target="_blank" rel="noreferrer"><code>onebot.createGroupFileFolder()</code></a> 创建群文件文件夹</li><li><a href="https://docs.go-cqhttp.org/api/#%E5%88%A0%E9%99%A4%E7%BE%A4%E6%96%87%E4%BB%B6%E6%96%87%E4%BB%B6%E5%A4%B9" target="_blank" rel="noreferrer"><code>onebot.deleteGroupFolder()</code></a> 删除群文件文件夹</li><li><a href="https://docs.go-cqhttp.org/api/#%E5%88%A0%E9%99%A4%E7%BE%A4%E6%96%87%E4%BB%B6" target="_blank" rel="noreferrer"><code>onebot.deleteGroupFile()</code></a> 删除群文件</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4%E6%96%87%E4%BB%B6%E8%B5%84%E6%BA%90%E9%93%BE%E6%8E%A5" target="_blank" rel="noreferrer"><code>onebot.getGroupFileUrl()</code></a> 获取群文件资源链接</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4-%E5%85%A8%E4%BD%93%E6%88%90%E5%91%98-%E5%89%A9%E4%BD%99%E6%AC%A1%E6%95%B0" target="_blank" rel="noreferrer"><code>onebot.getGroupAtAllRemain()</code></a> 获取群 @全体成员 剩余次数</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96VIP%E4%BF%A1%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.getVipInfo()</code></a> 获取 VIP 信息</li><li><a href="https://docs.go-cqhttp.org/api/#%E5%8F%91%E9%80%81%E7%BE%A4%E5%85%AC%E5%91%8A" target="_blank" rel="noreferrer"><code>onebot.sendGroupNotice()</code></a> 发送群公告</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4%E5%85%AC%E5%91%8A" target="_blank" rel="noreferrer"><code>onebot.getGroupNotice()</code></a> 获取群公告</li><li><a href="https://docs.go-cqhttp.org/api/#%E9%87%8D%E8%BD%BD%E4%BA%8B%E4%BB%B6%E8%BF%87%E6%BB%A4%E5%99%A8" target="_blank" rel="noreferrer"><code>onebot.reloadEventFilter()</code></a> 重载事件过滤器</li><li><a href="https://docs.go-cqhttp.org/api/#%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E5%88%B0%E7%BC%93%E5%AD%98%E7%9B%AE%E5%BD%95" target="_blank" rel="noreferrer"><code>onebot.downloadFile()</code></a> 下载文件到缓存目录</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E8%B4%A6%E5%8F%B7%E5%9C%A8%E7%BA%BF%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%88%97%E8%A1%A8" target="_blank" rel="noreferrer"><code>onebot.getOnlineClients()</code></a> 获取当前账号在线客户端列表</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%BE%A4%E6%B6%88%E6%81%AF%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95" target="_blank" rel="noreferrer"><code>onebot.getGroupMsgHistory()</code></a> 获取群消息历史记录</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%AE%BE%E7%BD%AE%E7%B2%BE%E5%8D%8E%E6%B6%88%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.setEssenceMsg()</code></a> 设置精华消息</li><li><a href="https://docs.go-cqhttp.org/api/#%E7%A7%BB%E5%87%BA%E7%B2%BE%E5%8D%8E%E6%B6%88%E6%81%AF" target="_blank" rel="noreferrer"><code>onebot.deleteEssenceMsg()</code></a> 移出精华消息</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E7%B2%BE%E5%8D%8E%E6%B6%88%E6%81%AF%E5%88%97%E8%A1%A8" target="_blank" rel="noreferrer"><code>onebot.getEssenceMsgList()</code></a> 获取精华消息列表</li><li><a href="https://docs.go-cqhttp.org/api/#%E6%A3%80%E6%9F%A5%E9%93%BE%E6%8E%A5%E5%AE%89%E5%85%A8%E6%80%A7" target="_blank" rel="noreferrer"><code>onebot.checkUrlSafely()</code></a> 检查链接安全性 <sup>[3]</sup></li><li><a href="https://docs.go-cqhttp.org/api/#%E8%8E%B7%E5%8F%96%E5%9C%A8%E7%BA%BF%E6%9C%BA%E5%9E%8B" target="_blank" rel="noreferrer"><code>onebot.getModelShow()</code></a> 获取在线机型</li><li><a href="https://docs.go-cqhttp.org/api/#%E8%AE%BE%E7%BD%AE%E5%9C%A8%E7%BA%BF%E6%9C%BA%E5%9E%8B" target="_blank" rel="noreferrer"><code>onebot.setModelShow()</code></a> 设置在线机型</li><li><a href="https://docs.go-cqhttp.org/api/#%E5%88%A0%E9%99%A4%E5%8D%95%E9%A1%B9%E5%A5%BD%E5%8F%8B" target="_blank" rel="noreferrer"><code>onebot.delete_unidirectional_friend()</code></a> 删除单项好友 <sup>[4]</sup></li><li><a href="https://docs.go-cqhttp.org/api/#%E5%8F%91%E9%80%81%E5%90%88%E5%B9%B6%E8%BD%AC%E5%8F%91-%E5%A5%BD%E5%8F%8B" target="_blank" rel="noreferrer"><code>onebot.send_private_forward_msg()</code></a> 发送合并转发 (好友)</li></ul><p>注释：</p><ol start="3"><li>这个方法名与 go-cqhttp 一致，并不是拼写错误</li><li>原文为「单项」，此处保持一致</li></ol><h3 id="频道-api" tabindex="-1">频道 API <a class="header-anchor" href="#频道-api" aria-label="Permalink to &quot;频道 API&quot;">​</a></h3><ul><li><a href="https://github.com/Mrs4s/go-cqhttp/blob/master/docs/guild.md#%E8%8E%B7%E5%8F%96%E9%A2%91%E9%81%93%E7%B3%BB%E7%BB%9F%E5%86%85BOT%E7%9A%84%E8%B5%84%E6%96%99" target="_blank" rel="noreferrer"><code>onebot.getGuildServiceProfile()</code></a> 获取频道系统内 BOT 的资料</li><li><a href="https://github.com/Mrs4s/go-cqhttp/blob/master/docs/guild.md#%E8%8E%B7%E5%8F%96%E9%A2%91%E9%81%93%E5%88%97%E8%A1%A8" target="_blank" rel="noreferrer"><code>onebot.getGuildList()</code></a> 获取频道列表</li><li><a href="https://github.com/Mrs4s/go-cqhttp/blob/master/docs/guild.md#%E9%80%9A%E8%BF%87%E8%AE%BF%E5%AE%A2%E8%8E%B7%E5%8F%96%E9%A2%91%E9%81%93%E5%85%83%E6%95%B0%E6%8D%AE" target="_blank" rel="noreferrer"><code>onebot.getGuildMetaByGuest()</code></a> 通过访客获取频道元数据</li><li><a href="https://github.com/Mrs4s/go-cqhttp/blob/master/docs/guild.md#%E8%8E%B7%E5%8F%96%E5%AD%90%E9%A2%91%E9%81%93%E5%88%97%E8%A1%A8" target="_blank" rel="noreferrer"><code>onebot.getGuildChannelList()</code></a> 获取子频道列表</li><li><a href="https://github.com/Mrs4s/go-cqhttp/blob/master/docs/guild.md#%E8%8E%B7%E5%8F%96%E9%A2%91%E9%81%93%E6%88%90%E5%91%98%E5%88%97%E8%A1%A8" target="_blank" rel="noreferrer"><code>onebot.getGuildMembers()</code></a> 获取频道成员列表</li><li><a href="https://github.com/Mrs4s/go-cqhttp/blob/master/docs/guild.md#%E5%8F%91%E9%80%81%E4%BF%A1%E6%81%AF%E5%88%B0%E5%AD%90%E9%A2%91%E9%81%93" target="_blank" rel="noreferrer"><code>onebot.sendGuildChannelMsg()</code></a> 发送信息到子频道</li></ul><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-label="Permalink to &quot;常见问题&quot;">​</a></h2><h4 id="问题-我不知道应该下载-release-中的哪一个文件。" tabindex="-1">问题：我不知道应该下载 release 中的哪一个文件。 <a class="header-anchor" href="#问题-我不知道应该下载-release-中的哪一个文件。" aria-label="Permalink to &quot;问题：我不知道应该下载 release 中的哪一个文件。&quot;">​</a></h4><p>在终端执行：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre><code><span class="line"><span style="color:var(--shiki-token-function);">node</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-number);">-e</span><span style="color:var(--shiki-token-text);"> </span><span style="color:var(--shiki-token-string);">&quot;console.log(process.arch)&quot;</span></span></code></pre></div><p>然后根据输出结果决定你要下载的文件的后缀部分：</p><ul><li>x32: 386</li><li>x64: amd64</li><li>arm64: arm64</li><li>arm: armv7</li></ul><h4 id="问题-我的-go-cqhttp-初次启动时并没有生成-config-yml。" tabindex="-1">问题：我的 go-cqhttp 初次启动时并没有生成 config.yml。 <a class="header-anchor" href="#问题-我的-go-cqhttp-初次启动时并没有生成-config-yml。" aria-label="Permalink to &quot;问题：我的 go-cqhttp 初次启动时并没有生成 config.yml。&quot;">​</a></h4><p>请检查你的 go-cqhttp 是否为最新版本。</p><h4 id="问题-使用-http-或反向-websocket-时无法接收消息-同时-go-cqhttp-有报错。" tabindex="-1">问题：使用 HTTP 或反向 WebSocket 时无法接收消息，同时 go-cqhttp 有报错。 <a class="header-anchor" href="#问题-使用-http-或反向-websocket-时无法接收消息-同时-go-cqhttp-有报错。" aria-label="Permalink to &quot;问题：使用 HTTP 或反向 WebSocket 时无法接收消息，同时 go-cqhttp 有报错。&quot;">​</a></h4><p>请检查你的配置是否正确。尤其注意以下几点：</p><ul><li><code>koishi.yml</code> 中的 <code>selfId</code> 必须写并且必须是字符串</li><li>如果你使用 HTTP：请不要忘记配置 <code>post</code>，同时默认情况下 <code>post</code> 的 <code>url</code> 字段应该包含 <code>/onebot</code></li><li>如果你使用反向 WebSocket：默认情况下 <code>universal</code> 字段应该包含 <code>/onebot</code></li></ul><h4 id="问题-发送消息时提示「账号可能被风控」。" tabindex="-1">问题：发送消息时提示「账号可能被风控」。 <a class="header-anchor" href="#问题-发送消息时提示「账号可能被风控」。" aria-label="Permalink to &quot;问题：发送消息时提示「账号可能被风控」。&quot;">​</a></h4><p>以下内容摘自 <a href="https://github.com/Mrs4s/go-cqhttp/issues/211#issuecomment-812059109" target="_blank" rel="noreferrer">Mrs4s/go-cqhttp#211</a> 和 <a href="https://github.com/Mrs4s/go-cqhttp/issues/633" target="_blank" rel="noreferrer">Mrs4s/go-cqhttp#633</a>：</p><p>风控也是分种类的，有 xml 消息被风控，有 json 消息被风控，也有发消息全部被风控。官方客户端正常那可以尝试更换 device.json 文件。再次声明，风控是随机事件，有人挂三五个月都不会被风控，有人天天被风控。是否风控由腾讯根据网络环境，设备，发送的消息来判断。</p><p>这里留下几个建议:</p><ul><li>不要在短时间内进行批量操作</li><li>不要在新设备登录不久发长信息 / xml / json 信息，以 100 字内的信息最佳</li><li>不要过分使用敏感操作</li></ul>',29);function _(x,F,q,C,P,D){const a=l("tab-select");return p(),i("div",null,[h,n(a,{class:"code"},{"tab-yaml":o(()=>[k]),"tab-ts":o(()=>[E]),_:1}),d,n(a,{class:"code"},{"tab-yaml":o(()=>[b]),"tab-ts":o(()=>[g]),_:1}),u,n(a,{class:"code"},{"tab-yaml":o(()=>[y]),"tab-ts":o(()=>[v]),_:1}),m,n(a,{class:"code"},{"tab-yaml":o(()=>[B]),"tab-ts":o(()=>[f]),_:1}),A])}const w=r(c,[["render",_]]);export{S as __pageData,w as default};
